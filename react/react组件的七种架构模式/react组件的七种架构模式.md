### 原文链接 :

[7 architectural attributes of a reliable React component ](https://dmitripavlutin.com/7-architectural-attributes-of-a-reliable-react-component/#1singleresponsibility)

react是一个基础类库, 你可以基于react组件高复用的优势, 把用户界面分割成一个个小的组件

基于组件的开发模式对生产率而言是有很大好处的, 一个复杂的系统通常由一个个简单并易于维护的模块组成. 但是, 只有把代码设计得非常好, 才能让一个个模块可以自由组合并且达到高复用度.

所以, 哪怕是业务场景复杂, 时间赶或者在毫无准备的情况下接到了紧急需求, 你也要保证代码设计的不要偏离自由组合以及高复用性这两个核心点

![image]("https://github.com/ReusLi/Article/blob/master/react/work-life-balance.jpg")


![image]("https://github.com/ReusLi/Article/raw/master/react/work-life-balance.jpg")

![image]("https://raw.githubusercontent.com/ReusLi/Article/master/react/work-life-balance.jpg")

![image]("/work-life-balance.jpg")

不幸的是, 经常会有一些错误的观点出现在我们的视线中, 比如:

* 写功能大而全的组件
* 组件之间紧耦合
* 不需要单元测试

这些错误的观点, 导致我们增加了许多[技术债务]("https://www.nczonline.net/blog/2012/02/22/understanding-technical-debt/"), 慢慢地, 我们会发现代码的维护和新功能的增加变得异常困难

当我在写react应用时, 我经常会问自己3个问题:
* **如何正确地构造组件?**
* **组件达到什么规模时需要分割?**
* **如何设计组件之间的通信才不会让组件之间变得紧耦合?**

幸运的是, 健壮的组件之间是有共同特征的, 让我们一起来学习这7种让组件变得更健壮的架构模式


## 目录
* [1 "单一职责"](#1)
* [1.1多重责任的陷阱](#1.1)
* [1.2案例研究：使组件承担一项责任](#1.2)
* [1.3案例研究：HOC赞成单一职责原则](#1.3)

* [2 "封装"](#2)
* [2.1信息隐藏](#2.1)
* [2.2沟通](#2.2)
* [2.3案例研究：封装修复](#2.3)

* [3 "可组合的"](#3)
* [3.1组成好处](#3.1)

* [4 "可重复使用的"](#4)
* [4.1跨应用程序重用](#4.1)
* [4.2重用第三方库](#4.2)

* [5 "纯"或"几乎纯"](#5)
* [5.1案例研究：从全局变量中纯化](#5.1)
* [5.2案例研究：从网络请求中净化](#5.2)
* [5.3将几乎纯粹转化为纯粹](#5.3)

* [6 "可测试"和"测试"](#6)
* [6.1案例研究：可测试的手段设计良好](#6.1)
* [7 "有意义"](#7)
* [7.1组件命名](#7.1)
* [7.2案例研究：编写不言自明的代码](#7.2)
* [7.3表现力的楼梯](#7.3)

* [8 做不断的改进](#8)

* [9 可靠性很重要](#9)

* [10 结论](#10)

<h1 id="1">1.单一职责</h1>

单一职责是写组件时经常需要考虑的原则之一

单一职责要求组件只负责一件事情, 只受一个因素的影响

这个"职责"可以是渲染一个列表,展示一个时间空间,发起一个http请求,绘画一个图表,或者懒加载一张图片等. 

为什么"只有一个理由可以改变组件"这个原则是非常重要的? 因为这样做能够让组件低耦合并且容易控制. 通过单一职责原则去控制组件的规模, 让组件专心实现本身的逻辑, 这对代码的实现, 后续的维护, 重用和测试都是极其方便的.

让我们看以下的例子:

用例1: 一个组件,它的职责是获取远程调用的数据, 那么相应地, 当远程调用的逻辑改变时, 就相当于有一个可以影响组件变动的因素. 这个因素可以是:

* URL地址改变了

* response的格式有变动

* 你希望换一个HTTP的类库


用例2: 一个表格组件, 它的数据包是一个数组的结构, 那么, 可以影响组件变动的因为可以是: 

* 要求分页

* 要求空数据时显示提示语

以上的描述, 你觉得这个表格组件是不是一个单一职责的组件呢? 答案是: 是的. 所以, 请把分页和提示分拆成2个职责吧.

关于单一职责原则, 还有一种说法是: 你必须清楚地知道这种设计模式总是围绕一个"核心点"的. 拿上面的例子来说, "核心点" 就是 远程请求逻辑 和 渲染数据逻辑.

如果你对单一职责模式还不明白的地方, 可以看[这篇文章](https://8thlight.com/blog/uncle-bob/2014/05/08/SingleReponsibilityPrinciple.html)

一个项目, 在从0到1的阶段, 往往需要在代码层面经过高频的修改, 这时候是最适合使用单一职责模式的阶段.


<h2 id="1.1">1.1 多重职责的陷阱</h2>